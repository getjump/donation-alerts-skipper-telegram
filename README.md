# donation-alerts-skipper-telegram
Скипалка донатов DonationAlerts в группе Telegram

## Возможности

- Отлавливает донаты из DonationAlerts публикует их в группу в Telegram
- Возможность скипнуть донат, по кнопке под сообщением в Telegram
- Поддержка голосовых донатов (конвертация через ffmpeg)
- Обратная связь с DonationAlerts, стример видит что сообщение не будет воспроизводится и если он скипает сообщение, это отображается в группе

## Как использовать?

***Рекомендуется также увеличить время на модерацию***

1. Заходим в [Donation Alerts - Виджеты - Оповещения](https://www.donationalerts.com/dashboard/alert-widget)
2. Нажимаем показать ссылку для встраивания на Группе 1
3. Нажимаем скопировать ссылку, открываем в отдельной вкладке
4. В конце ссылки видим `token=...`, копируем всё что после `token=`
5. Копируем `example.env` в `.env`
6. `DA_SOCKET_TOKEN=` после равно вставляем то, что скопировали на шаге (4)
7. У вас должен быть бот Telegram, если нет создаём его через [Bot Father](https://t.me/BotFather)
8. `TELEGRAM_BOT_TOKEN=` вставляем токен, который получили от [Bot Father](https://t.me/BotFather)
9. Добавляем бота в группу, делаем его администратором (не обязательно, но это один из простейших способов получить необходимый параметр)
10. Пишем любое сообщение в группу
11. Переходим в браузере по ссылке `https://api.telegram.org/bot{token}/getUpdates` где вместо `{token}` вставляем токен бота из шага (7)
12. Глазами ищем объект вида `chat->id` и `id` который является отрицательным числом, копируем его
13. `TELEGRAM_CHAT_ID=` `id` которое мы получили на шаге (12)
14. По ссылке открытой на шаге (3), нажимаем просмотреть исходный код 
15. Нам необходимо определить `socket.io` сервер, который используется у вас, можно воспользоваться поиском по строке `socket = io(`
16. Нужно скопировать всё что находится между одинарными кавычками, например, `wss://socket2.donationalerts.ru:443`
17. `DA_SOCKET_URL=` тому что мы получили на шаге (16)
18. Далее запускаем Docker контейнер, например, командой `make start`
19. ????
20. PROFIT

